<!DOCTYPE html>
<html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Creating Plugins | org-press</title><meta name="description" content="Complete guide to creating org-press block plugins"/><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css" media="(prefers-color-scheme: light)"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.min.css" media="(prefers-color-scheme: dark)"/><script>
          // Register org-mode language for highlight.js
          if (typeof hljs !== 'undefined') {
            hljs.registerLanguage('org', function(hljs) {
              return {
                name: 'Org',
                aliases: ['org', 'org-mode', 'orgmode'],
                case_insensitive: true,
                contains: [
                  // Headlines
                  {
                    className: 'section',
                    begin: /^\*+\s/,
                    end: /$/,
                    contains: [
                      { className: 'keyword', begin: /\b(TODO|DONE|WAITING|CANCELLED|NEXT|HOLD)\b/ }
                    ]
                  },
                  // Keywords (#+KEYWORD:)
                  {
                    className: 'meta',
                    begin: /^#\+[A-Za-z_]+:/,
                    end: /$/,
                    contains: [{ className: 'string', begin: /\s/, end: /$/ }]
                  },
                  // Begin/end blocks
                  { className: 'keyword', begin: /^#\+(begin|end)_[a-z]+/i, relevance: 10 },
                  // Property drawers
                  { className: 'attribute', begin: /^:\w+:/, end: /$/ },
                  // Links [[url][description]]
                  {
                    className: 'link',
                    begin: /\[\[/,
                    end: /\]\]/,
                    contains: [{ className: 'string', begin: /\]\[/, end: /(?=\]\])/ }]
                  },
                  // Comments (lines starting with #, but not #+)
                  { className: 'comment', begin: /^#[^+]/, end: /$/ },
                  // Timestamps
                  { className: 'number', begin: /<\d{4}-\d{2}-\d{2}/, end: />/ },
                  // Tags :tag1:tag2:
                  { className: 'tag', begin: /\s:[a-zA-Z0-9_@#%:]+:\s*$/ }
                ]
              };
            });
            // Run highlighting after DOM is ready
            document.addEventListener('DOMContentLoaded', function() {
              hljs.highlightAll();
            });
          }
        </script><script>
          (function() {
            // Set current path as data attribute for CSS styling
            document.documentElement.dataset.path = window.location.pathname;

            // Mobile menu toggle using event delegation
            document.addEventListener('click', function(e) {
              var button = e.target.closest('.mobile-menu-button');
              if (button) {
                e.stopPropagation();
                document.body.classList.toggle('mobile-menu-open');
                return;
              }
              // Close menu when clicking a link inside the menu
              var menuLink = e.target.closest('.mobile-menu a');
              if (menuLink) {
                document.body.classList.remove('mobile-menu-open');
                return;
              }
              // Close menu when clicking outside
              if (document.body.classList.contains('mobile-menu-open')) {
                var menu = document.querySelector('.mobile-menu');
                if (menu && !menu.contains(e.target)) {
                  document.body.classList.remove('mobile-menu-open');
                }
              }
            });

            // Highlight current page in navigation
            document.addEventListener('DOMContentLoaded', function() {
              var path = window.location.pathname;
              // Highlight sidebar links
              document.querySelectorAll('.sidebar-link').forEach(function(link) {
                if (link.getAttribute('href') === path) {
                  link.classList.add('active');
                  link.closest('.sidebar-item')?.classList.add('active');
                }
              });
              // Highlight top nav links
              document.querySelectorAll('.top-nav-link').forEach(function(link) {
                var href = link.getAttribute('href');
                var match = link.dataset.match;
                if (path === href || (match && path.startsWith(match))) {
                  link.classList.add('active');
                }
              });
            });
          })();
        </script><link rel="stylesheet" href="/assets/theme-DsForQV0.css"/><script type="module" src="/assets/entry-client-l0sNRNKZ.js"></script></head><body><div class="docs-layout"><header class="top-nav"><div class="top-nav-container"><a href="/index.html" class="top-nav-logo"><span class="logo-text">Org-Press</span></a><nav class="top-nav-links"><a href="/guide/index.html" class="top-nav-link " data-match="^\/(guide(\/|$)|getting-started|index\.html$)">Guide</a><a href="/config/index.html" class="top-nav-link " data-match="^\/config(\/|$)">Config</a><a href="/plugins/index.html" class="top-nav-link active" data-match="^\/plugins(\/|$)">Plugins</a><a href="/api/index.html" class="top-nav-link " data-match="^\/api(\/|$)">API</a></nav><div class="top-nav-social"><a href="https://github.com/org-press/org-press/blob/main/docs/content/plugins/creating-plugins.org?plain=1" class="top-nav-source-link" target="_blank" rel="noopener noreferrer" title="View page source on GitHub">:view-source</a><a href="https://github.com/org-press/org-press" class="top-nav-social-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></div><button class="mobile-menu-button" aria-label="Toggle navigation menu" aria-expanded="false"><span class="hamburger-line"></span><span class="hamburger-line"></span><span class="hamburger-line"></span></button></div></header><div class="mobile-menu"><nav class="mobile-menu-nav"><div class="mobile-menu-section"><a href="/guide/index.html" class="mobile-menu-section-title ">Guide</a><ul class="mobile-menu-list"><li><a href="/guide/index.html" class="mobile-menu-link ">What is Org-Press?</a></li><li><a href="/guide/getting-started.html" class="mobile-menu-link ">Getting Started</a></li><li><a href="/guide/why-org-press.html" class="mobile-menu-link ">Why Org-Press?</a></li><li><a href="/guide/features.html" class="mobile-menu-link ">Features</a></li><li><a href="/guide/rendering-modes.html" class="mobile-menu-link ">Rendering Modes</a></li><li><a href="/guide/cli.html" class="mobile-menu-link ">CLI Reference</a></li><li><a href="/guide/using-plugins.html" class="mobile-menu-link ">Using Plugins</a></li><li><a href="/guide/block-imports.html" class="mobile-menu-link ">Block Imports</a></li><li><a href="/guide/static-assets.html" class="mobile-menu-link ">Static Assets</a></li><li><a href="/guide/building.html" class="mobile-menu-link ">Building for Production</a></li><li><a href="/guide/deploying.html" class="mobile-menu-link ">Deploying</a></li><li><a href="/guide/troubleshooting.html" class="mobile-menu-link ">Troubleshooting</a></li></ul></div><div class="mobile-menu-section"><a href="/config/index.html" class="mobile-menu-section-title ">Config</a><ul class="mobile-menu-list"><li><a href="/config/index.html" class="mobile-menu-link ">Overview</a></li><li><a href="/config/shared-options.html" class="mobile-menu-link ">Shared Options</a></li><li><a href="/config/build-options.html" class="mobile-menu-link ">Build Options</a></li><li><a href="/config/server-options.html" class="mobile-menu-link ">Server Options</a></li><li><a href="/config/plugin-options.html" class="mobile-menu-link ">Plugin Options</a></li></ul></div><div class="mobile-menu-section"><a href="/plugins/index.html" class="mobile-menu-section-title active">Plugins</a><ul class="mobile-menu-list"><li><a href="/plugins/index.html" class="mobile-menu-link ">Overview</a></li><li class="mobile-menu-group"><span class="mobile-menu-group-title">Official Plugins</span><ul class="mobile-menu-sublist"><li><a href="/plugins/react.html" class="mobile-menu-link ">React</a></li><li><a href="/plugins/echarts.html" class="mobile-menu-link ">ECharts</a></li><li><a href="/plugins/excalidraw.html" class="mobile-menu-link ">Excalidraw</a></li><li><a href="/plugins/jscad.html" class="mobile-menu-link ">JSCAD</a></li><li><a href="/plugins/test.html" class="mobile-menu-link ">Test</a></li></ul></li><li><a href="/plugins/creating-plugins.html" class="mobile-menu-link ">Creating Plugins</a></li></ul></div><div class="mobile-menu-section"><a href="/api/index.html" class="mobile-menu-section-title ">API</a><ul class="mobile-menu-list"><li><a href="/api/index.html" class="mobile-menu-link ">Overview</a></li><li><a href="/api/plugin-api.html" class="mobile-menu-link ">Plugin API</a></li><li><a href="/api/javascript-api.html" class="mobile-menu-link ">JavaScript API</a></li><li><a href="/api/hmr-api.html" class="mobile-menu-link ">HMR API</a></li><li><a href="/api/cli-plugins.html" class="mobile-menu-link ">CLI Plugins</a></li></ul></div></nav><div class="mobile-menu-footer"><a href="https://github.com/org-press/org-press" class="mobile-menu-link" target="_blank" rel="noopener noreferrer">GitHub</a></div></div><div class="alpha-banner"><span class="alpha-banner-icon">⚠️</span><span class="alpha-banner-text"><strong>Early Alpha</strong> — Org-press is experimental. Perfect for hackers and tinkerers, not ready for production. Documentation may be incomplete or inaccurate.</span></div><div class="docs-container"><aside class="sidebar"><div class="sidebar-content"><nav class="sidebar-nav" aria-label="Section navigation"><div class="sidebar-section"><h3 class="sidebar-section-title">Plugins</h3><ul class="sidebar-list"><li class="sidebar-item "><a href="/plugins/index.html" class="sidebar-link ">Overview</a></li><li class="sidebar-group"><span class="sidebar-group-title">Official Plugins</span><ul class="sidebar-list sidebar-list-nested"><li class="sidebar-item "><a href="/plugins/react.html" class="sidebar-link ">React</a></li><li class="sidebar-item "><a href="/plugins/echarts.html" class="sidebar-link ">ECharts</a></li><li class="sidebar-item "><a href="/plugins/excalidraw.html" class="sidebar-link ">Excalidraw</a></li><li class="sidebar-item "><a href="/plugins/jscad.html" class="sidebar-link ">JSCAD</a></li><li class="sidebar-item "><a href="/plugins/test.html" class="sidebar-link ">Test</a></li></ul></li><li class="sidebar-item "><a href="/plugins/creating-plugins.html" class="sidebar-link ">Creating Plugins</a></li></ul></div></nav></div></aside><main class="docs-content"><article class="docs-article"><div class="docs-body"><div><h1 id="creating-plugins">Creating Plugins</h1><p>This guide covers everything you need to build custom block plugins for org-press.
</p><h2 id="what-is-a-block-plugin">What is a Block Plugin?</h2><p>A block plugin transforms org-mode source blocks into rendered output. When org-press encounters a code block, it checks each plugin to see if it matches, then calls the plugin's <code class="inline-verbatim">transform</code> function to generate HTML, JavaScript, or CSS.
</p><h2 id="plugin-interface">Plugin Interface</h2><p>Every plugin implements the <code class="inline-verbatim">BlockPlugin</code> interface:
</p><pre><code>interface BlockPlugin {
  /** Unique plugin identifier */
  name: string;

  /** Languages this plugin handles (e.g., ["javascript", "typescript"]) */
  languages?: string[];

  /** Custom matching logic (alternative to languages) */
  matches?(block: CodeBlock): boolean;

  /** Transform the block into renderable output */
  transform(block: CodeBlock, ctx: TransformContext): Promise&#x3C;TransformResult>;

  /** Optional: Server-side execution at build time */
  onServer?(block: CodeBlock, ctx: TransformContext): Promise&#x3C;ServerResult>;

  /** Optional: CLI command to add to orgp */
  cli?: CliCommand;
}
</code></pre>
<h2 id="your-first-plugin">Your First Plugin</h2><p>Here's a minimal plugin that renders blocks with <code class="inline-verbatim">:use greeting</code>:
</p><pre><code>// greeting-plugin.ts
import type { BlockPlugin } from "org-press";

export const greetingPlugin: BlockPlugin = {
  name: "greeting",

  // Match blocks with :use greeting parameter
  matches(block) {
    return block.parameters.use === "greeting";
  },

  // Transform the block content
  async transform(block, ctx) {
    const name = block.value.trim() || "World";
    return {
      html: `&#x3C;div class="greeting">Hello, ${name}!&#x3C;/div>`,
      css: `.greeting { font-size: 2rem; color: blue; }`,
    };
  },
};
</code></pre>
<p>Usage in org file:
</p><pre><code>#+begin_src text :use greeting
Alice
#+end_src</code></pre>
<h2 id="matching-blocks">Matching Blocks</h2><p>Plugins can match blocks in two ways:
</p><h3 id="by-language">By Language</h3><pre><code>export const myPlugin: BlockPlugin = {
  name: "my-plugin",
  languages: ["python", "python3"],
  // ...
};
</code></pre>
<p>Matches: <code class="inline-verbatim">#+begin_src python</code> and <code class="inline-verbatim">#+begin_src python3</code></p><h3 id="by-parameter">By Parameter</h3><pre><code>export const myPlugin: BlockPlugin = {
  name: "my-plugin",

  matches(block) {
    // Match any block with :use myplugin
    return block.parameters.use === "myplugin";
  },
  // ...
};
</code></pre>
<p>Matches: <code class="inline-verbatim">#+begin_src javascript :use myplugin</code></p><h3 id="combined-matching">Combined Matching</h3><pre><code>export const myPlugin: BlockPlugin = {
  name: "my-plugin",
  languages: ["json"],

  matches(block) {
    // Only match JSON blocks with :use diagram
    return block.language === "json" &#x26;&#x26;
           block.parameters.use === "diagram";
  },
  // ...
};
</code></pre>
<h2 id="transform-context">Transform Context</h2><p>The <code class="inline-verbatim">ctx</code> parameter provides context about the block and project:
</p><pre><code>interface TransformContext {
  /** Block parameters from org (e.g., { exports: "both", use: "server" }) */
  parameters: Record&#x3C;string, string>;

  /** Full path to the org file */
  filePath: string;

  /** Project configuration */
  config: OrgPressConfig;

  /** Cache directory for generated files */
  cacheDir: string;

  /** Block name if provided via #+NAME: */
  blockName?: string;
}
</code></pre>
<h2 id="transform-results">Transform Results</h2><p>The <code class="inline-verbatim">transform</code> function returns what to render:
</p><h3 id="html-only">HTML Only</h3><pre><code>async transform(block, ctx) {
  return {
    html: `&#x3C;div class="my-component">${block.value}&#x3C;/div>`,
  };
}
</code></pre>
<h3 id="html-css">HTML + CSS</h3><pre><code>async transform(block, ctx) {
  return {
    html: `&#x3C;div class="chart">&#x3C;/div>`,
    css: `.chart { width: 100%; height: 300px; }`,
  };
}
</code></pre>
<h3 id="javascript-execution">JavaScript Execution</h3><pre><code>async transform(block, ctx) {
  return {
    // Code runs in browser when page loads
    code: `
      const data = ${JSON.stringify(block.value)};
      console.log("Loaded:", data);
    `,
  };
}
</code></pre>
<h3 id="with-react-wrapper">With React Wrapper</h3><p>For interactive components, provide a wrapper:
</p><pre><code>async transform(block, ctx) {
  return {
    // Data passed to wrapper component
    code: JSON.stringify({ value: block.value }),

    // React component to render
    wrapper: {
      path: "@my-plugin/components",
      exportName: "MyInteractiveComponent",
    },
  };
}
</code></pre>
<h2 id="creating-wrapper-components">Creating Wrapper Components</h2><p>Wrappers are React components that receive the block data:
</p><pre><code>// components/MyInteractiveComponent.tsx
import React, { useState, useEffect } from "react";

interface Props {
  data: string;  // The code string from transform
  container: HTMLElement;  // DOM element to render into
}

export function MyInteractiveComponent({ data, container }: Props) {
  const [state, setState] = useState(JSON.parse(data));

  return (
    &#x3C;div className="interactive-wrapper">
      &#x3C;pre>{JSON.stringify(state, null, 2)}&#x3C;/pre>
      &#x3C;button onClick={() => setState({ ...state, clicked: true })}>
        Click me
      &#x3C;/button>
    &#x3C;/div>
  );
}
</code></pre>
<h2 id="server-side-execution">Server-Side Execution</h2><p>For build-time processing, implement <code class="inline-verbatim">onServer</code>:
</p><pre><code>export const dataPlugin: BlockPlugin = {
  name: "data-loader",

  matches(block) {
    return block.parameters.use === "data";
  },

  // Runs at build time with Node.js access
  async onServer(block, ctx) {
    const fs = await import("fs/promises");
    const filePath = block.value.trim();
    const content = await fs.readFile(filePath, "utf-8");

    return {
      result: JSON.parse(content),
    };
  },

  // Transform receives server result
  async transform(block, ctx) {
    // ctx.serverResult contains what onServer returned
    return {
      html: `&#x3C;pre>${JSON.stringify(ctx.serverResult, null, 2)}&#x3C;/pre>`,
    };
  },
};
</code></pre>
<h2 id="adding-cli-commands">Adding CLI Commands</h2><p>Plugins can extend the <code class="inline-verbatim">orgp</code> CLI:
</p><pre><code>export const testPlugin: BlockPlugin = {
  name: "test",

  cli: {
    command: "test",
    description: "Run tests in :use test blocks",
    options: [
      { flag: "-w, --watch", description: "Watch mode" },
      { flag: "--coverage", description: "Collect coverage" },
      { flag: "-t, --filter &#x3C;pattern>", description: "Filter tests" },
    ],

    async action(args, config, plugins) {
      console.log("Running tests...");
      console.log("Options:", args);

      // Find all test blocks
      // Run vitest or your test runner
      // Report results
    },
  },
};
</code></pre>
<p>Usage:
</p><pre class="src-block"><code class="hljs language-bash">orgp <span class="hljs-built_in">test</span> --watch
orgp <span class="hljs-built_in">test</span> --coverage
orgp <span class="hljs-built_in">test</span> -t <span class="hljs-string">"user validation"</span>
</code></pre><h2 id="complete-example-chart-plugin">Complete Example: Chart Plugin</h2><p>Here's a full plugin that renders charts using Chart.js:
</p><pre><code>// chart-plugin.ts
import type { BlockPlugin } from "org-press";

export const chartPlugin: BlockPlugin = {
  name: "chart",
  languages: ["json"],

  matches(block) {
    return block.parameters.use === "chart";
  },

  async transform(block, ctx) {
    const chartId = `chart-${Math.random().toString(36).slice(2)}`;
    const config = JSON.parse(block.value);

    return {
      html: `&#x3C;canvas id="${chartId}" style="max-width: 600px;">&#x3C;/canvas>`,

      code: `
        import Chart from 'chart.js/auto';

        const ctx = document.getElementById('${chartId}');
        new Chart(ctx, ${JSON.stringify(config)});
      `,

      css: `
        #${chartId} {
          margin: 1rem 0;
        }
      `,
    };
  },
};
</code></pre>
<p>Usage:
</p><pre><code>#+begin_src json :use chart
{
  "type": "bar",
  "data": {
    "labels": ["Red", "Blue", "Yellow"],
    "datasets": [{
      "label": "Votes",
      "data": [12, 19, 3]
    }]
  }
}
#+end_src</code></pre>
<h2 id="plugin-configuration">Plugin Configuration</h2><p>Plugins can accept options:
</p><pre><code>// Plugin factory function
export function createChartPlugin(options: ChartPluginOptions = {}) {
  const { defaultType = "bar", theme = "light" } = options;

  return {
    name: "chart",

    async transform(block, ctx) {
      const config = JSON.parse(block.value);
      config.type = config.type || defaultType;
      // Apply theme...

      return { /* ... */ };
    },
  } satisfies BlockPlugin;
}

// Usage in config
export default {
  plugins: [
    createChartPlugin({ defaultType: "line", theme: "dark" }),
  ],
};
</code></pre>
<h2 id="writing-plugins-as-org-files-literate-plugins">Writing Plugins as Org Files (Literate Plugins)</h2><p>Plugins can be written as literate programming files that combine documentation, examples, and code. The code is extracted and compiled using <code class="inline-verbatim">orgp build --block</code>.
</p><h3 id="literate-plugin-structure">Literate Plugin Structure</h3><pre><code>my-literate-plugin/
├── index.org         # Literate source (plugin + docs + examples)
├── package.json
└── dist/             # Built output
    ├── index.js
    └── index.d.ts
</code></pre>
<h3 id="example-indexorg">Example index.org</h3><p>#+begin<sub>export</sub> html
&#x3C;pre>&#x3C;code class="language-org">&#x26;#35;+TITLE: My Plugin
&#x26;#35;+DESCRIPTION: A literate plugin example
</p><h1 id="documentation">Documentation</h1><p>This plugin does amazing things...
</p><h1 id="plugin-implementation">Plugin Implementation</h1><p>&#x26;#35;+NAME: plugin
&#x26;#35;+begin<sub>src</sub> typescript
import type { BlockPlugin } from "org-press";
</p><p>export const myPlugin: BlockPlugin = {
  name: "my-plugin",
  async transform(block, ctx) {
    return { html: "&#x26;lt;div&#x26;gt;" + block.value + "&#x26;lt;/div&#x26;gt;" };
  },
};
</p><p>export default myPlugin;
&#x26;#35;+end<sub>src</sub></p><h1 id="examples">Examples</h1><p>...usage examples here...
&#x3C;/code>&#x3C;/pre>
#+end<sub>export</sub></p><h3 id="building-the-plugin">Building the Plugin</h3><pre><code class="hljs language-bash"><span class="hljs-comment"># Extract and compile the "plugin" block to dist/</span>
orgp build index.org --block plugin --out dist/

<span class="hljs-comment"># The generated files:</span>
<span class="hljs-comment"># dist/plugin.js    - Compiled JavaScript</span>
<span class="hljs-comment"># dist/plugin.d.ts  - TypeScript declarations</span>
<span class="hljs-comment"># dist/index.js     - Re-exports all blocks</span>
<span class="hljs-comment"># dist/index.d.ts</span>
</code></pre>
<h3 id="packagejson-for-literate-plugins">package.json for Literate Plugins</h3><pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-org-press-plugin"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.js"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.d.ts"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"orgp build index.org --block plugin --out dist/"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"org-press"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.2.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>See the <a href="/plugins/echarts.html">ECharts Plugin</a> for a complete literate plugin example.
</p><h2 id="publishing-your-plugin">Publishing Your Plugin</h2><h3 id="traditional-package-structure">Traditional Package Structure</h3><pre><code>my-org-press-plugin/
├── src/
│   ├── index.ts        # Plugin export
│   └── components/     # Wrapper components (if any)
├── package.json
├── tsconfig.json
└── README.md
</code></pre>
<h3 id="packagejson">package.json</h3><pre><code>{
  "name": "my-org-press-plugin",
  "version": "1.0.0",
  "type": "module",
  "main": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": "./dist/index.js",
    "./components": "./dist/components/index.js"
  },
  "peerDependencies": {
    "org-press": "^0.2.0"
  }
}
</code></pre>
<h3 id="export-your-plugin">Export Your Plugin</h3><pre><code>// src/index.ts
export { myPlugin } from "./plugin";
export { createMyPlugin } from "./plugin";

// Re-export types if useful
export type { MyPluginOptions } from "./types";
</code></pre>
<h2 id="best-practices">Best Practices</h2><ol><li><strong>Use unique names</strong> - Prefix with your package name to avoid conflicts
</li><li><strong>Handle errors gracefully</strong> - Return helpful error HTML instead of throwing
</li><li><strong>Support rendering modes</strong> - Respect <code class="inline-verbatim">dom</code>, <code class="inline-verbatim">sourceOnly</code>, <code class="inline-verbatim">silent</code>, <code class="inline-verbatim">raw</code></li><li><strong>Document your syntax</strong> - Show example org blocks in README
</li><li><strong>Test your plugin</strong> - Use <code class="inline-verbatim">:use test</code> blocks to verify behavior
</li><li><strong>Minimize dependencies</strong> - Keep bundle size small
</li><li><strong>Support SSR</strong> - Ensure wrappers work with server-side rendering
</li></ol><h2 id="see-also">See Also</h2><ul><li><a href="/api/plugin-api.html">Plugin API Reference</a> - Complete API documentation
</li><li><a href="/api/cli-plugins.html">CLI Plugins</a> - Adding CLI commands
</li><li><a href="/plugins/excalidraw.html">Excalidraw Plugin</a> - Example: diagram plugin
</li><li><a href="/plugins/jscad.html">JSCAD Plugin</a> - Example: 3D modeling plugin
</li><li><a href="/plugins/test.html">Test Plugin</a> - Example: CLI integration
</li></ul></div></div></article></main><aside class="toc"><div class="toc-content"><h4 class="toc-title">On this page</h4><nav class="toc-nav" aria-label="Table of contents"><ul class="toc-list"><li class="toc-item "><a href="#what-is-a-block-plugin" class="toc-link">What is a Block Plugin?</a></li><li class="toc-item "><a href="#plugin-interface" class="toc-link">Plugin Interface</a></li><li class="toc-item "><a href="#your-first-plugin" class="toc-link">Your First Plugin</a></li><li class="toc-item "><a href="#matching-blocks" class="toc-link">Matching Blocks</a></li><li class="toc-item toc-item-nested"><a href="#by-language" class="toc-link">By Language</a></li><li class="toc-item toc-item-nested"><a href="#by-parameter" class="toc-link">By Parameter</a></li><li class="toc-item toc-item-nested"><a href="#combined-matching" class="toc-link">Combined Matching</a></li><li class="toc-item "><a href="#transform-context" class="toc-link">Transform Context</a></li><li class="toc-item "><a href="#transform-results" class="toc-link">Transform Results</a></li><li class="toc-item toc-item-nested"><a href="#html-only" class="toc-link">HTML Only</a></li><li class="toc-item toc-item-nested"><a href="#html-css" class="toc-link">HTML + CSS</a></li><li class="toc-item toc-item-nested"><a href="#javascript-execution" class="toc-link">JavaScript Execution</a></li><li class="toc-item toc-item-nested"><a href="#with-react-wrapper" class="toc-link">With React Wrapper</a></li><li class="toc-item "><a href="#creating-wrapper-components" class="toc-link">Creating Wrapper Components</a></li><li class="toc-item "><a href="#server-side-execution" class="toc-link">Server-Side Execution</a></li><li class="toc-item "><a href="#adding-cli-commands" class="toc-link">Adding CLI Commands</a></li><li class="toc-item "><a href="#complete-example-chart-plugin" class="toc-link">Complete Example: Chart Plugin</a></li><li class="toc-item "><a href="#plugin-configuration" class="toc-link">Plugin Configuration</a></li><li class="toc-item "><a href="#writing-plugins-as-org-files-literate-plugins" class="toc-link">Writing Plugins as Org Files (Literate Plugins)</a></li><li class="toc-item toc-item-nested"><a href="#literate-plugin-structure" class="toc-link">Literate Plugin Structure</a></li><li class="toc-item toc-item-nested"><a href="#example-indexorg" class="toc-link">Example index.org</a></li><li class="toc-item toc-item-nested"><a href="#building-the-plugin" class="toc-link">Building the Plugin</a></li><li class="toc-item toc-item-nested"><a href="#packagejson-for-literate-plugins" class="toc-link">package.json for Literate Plugins</a></li><li class="toc-item "><a href="#publishing-your-plugin" class="toc-link">Publishing Your Plugin</a></li><li class="toc-item toc-item-nested"><a href="#traditional-package-structure" class="toc-link">Traditional Package Structure</a></li><li class="toc-item toc-item-nested"><a href="#packagejson" class="toc-link">package.json</a></li><li class="toc-item toc-item-nested"><a href="#export-your-plugin" class="toc-link">Export Your Plugin</a></li><li class="toc-item "><a href="#best-practices" class="toc-link">Best Practices</a></li><li class="toc-item "><a href="#see-also" class="toc-link">See Also</a></li></ul></nav></div></aside></div><footer class="site-footer"><div class="footer-content"><div class="footer-grid"><div class="footer-column"><h4>Guide</h4><ul><li><a href="/guide/index.html">What is Org-Press?</a></li><li><a href="/guide/getting-started.html">Getting Started</a></li><li><a href="/guide/features.html">Features</a></li><li><a href="/guide/cli.html">CLI Reference</a></li><li><a href="/guide/building.html">Building</a></li></ul></div><div class="footer-column"><h4>Config</h4><ul><li><a href="/config/index.html">Overview</a></li><li><a href="/config/shared-options.html">Shared Options</a></li><li><a href="/config/build-options.html">Build Options</a></li><li><a href="/config/server-options.html">Server Options</a></li></ul></div><div class="footer-column"><h4>Plugins</h4><ul><li><a href="/plugins/index.html">Overview</a></li><li><a href="/plugins/excalidraw.html">Excalidraw</a></li><li><a href="/plugins/jscad.html">JSCAD</a></li><li><a href="/plugins/creating-plugins.html">Creating Plugins</a></li></ul></div><div class="footer-column"><h4>API</h4><ul><li><a href="/api/index.html">Overview</a></li><li><a href="/api/plugin-api.html">Plugin API</a></li><li><a href="/api/javascript-api.html">JavaScript API</a></li></ul></div><div class="footer-column"><h4>Resources</h4><ul><li><a href="/examples/index.html">Examples</a></li><li><a href="https://github.com/org-press/org-press" target="_blank" rel="noopener">GitHub</a></li><li><a href="https://github.com/org-press/org-press/releases" target="_blank" rel="noopener">Releases</a></li></ul></div></div><div class="footer-bottom"><p class="footer-copyright">Released under the GPL-2.0 License.</p><p class="footer-credit">Built with <a href="https://github.com/org-press/org-press">org-press</a></p></div></div></footer></div><script src="https://analytics.ideable.dev/api/script.js" data-site-id="5dc60eeeac5d" defer=""></script></body></html>