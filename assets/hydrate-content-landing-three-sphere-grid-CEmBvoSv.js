import{i as Ce}from"./hydrate-runtime-S5DTWFRe.js";import{S as xe,C as et,P as He,W as ve,a as ye,M as Re,I as Ee,b as Ie,g as Ae,c as De,d as Te,e as Pe,f as Ye,h as Ze,r as Xe,V as We}from"./formations.org_NAME_formations-BY65bvBS.js";import{e as ot,a as Ge}from"./animation.org_NAME_animation-CWcJ1bJ7.js";import"./preload-helper-BXl3LOEh.js";function Ft(Lt,Ot={}){const{gridCols:c=40,gridRows:u=30,sphereRadius:Bt=.3,spacing:Le=1.2,backgroundColor:_t=657935,sphereColor:nt=16777215}=Ot,it=new xe;it.background=new et(_t);const Y=new He(50,1,.1,1e3),O=50;Y.position.set(0,0,O),Y.lookAt(0,0,0);const S=new ve({antialias:!0});S.setPixelRatio(Math.min(window.devicePixelRatio,2)),Lt.appendChild(S.domElement),S.domElement.style.position="fixed",S.domElement.style.top="0",S.domElement.style.left="0",S.domElement.style.width="100vw",S.domElement.style.height="100vh",S.domElement.style.zIndex="0",S.domElement.style.pointerEvents="none";const ft=new ye(Bt,8,6),mt=new Re({color:nt}),N=c*u,H=new Ee(ft,mt,N),W=new et(nt),U=new Float32Array(N*3);for(let o=0;o<N;o++)U[o*3]=W.r,U[o*3+1]=W.g,U[o*3+2]=W.b;H.instanceColor=new Ie(U,3),it.add(H);const D=2*Math.tan(50/2*Math.PI/180)*O,qt=window.innerWidth/window.innerHeight,j=D*qt,B=Math.max(j/c,D/u)*1.1,Mt=(c-1)*B,bt=(u-1)*B,V={gridCols:c,gridRows:u,effectiveSpacing:B,gridWidth:Mt,gridHeight:bt,visibleWidth:j,visibleHeight:D,totalSpheres:N},{sphereToCube:Nt,cubeStates:J,spheresPerCubeSide:rt,sphereSpacingInCube:st}=Ae(V),{sphereToGlobe:Ut,globeRadius:at}=De(V),{sphereToPrism:jt}=Te(V),{warpStars:wt,warpTunnelRadius:Vt,warpDepth:_,warpNearPlane:Jt}=Pe(V),A=[],Z=[],q=new Ye;let St=0;for(let o=0;o<u;o++)for(let l=0;l<c;l++){const h=l*B-Mt/2,C=o*B-bt/2,b=Math.sqrt(Math.pow(l-c/2,2)+Math.pow(o-u/2,2)),R=Math.sqrt(Math.pow(c/2,2)+Math.pow(u/2,2)),z=b/R*1.5;Z.push({targetX:h,targetY:C,targetZ:0,targetScale:.15,currentX:h,currentY:C-D*1.5,currentZ:0,currentScale:.15,delay:z,isCharacter:!1,wordGroup:-1,baseZ:0,baseScale:.15,highlightAmount:0,targetHighlight:0,highlightDelay:Math.random()}),q.makeTranslation(h,C-D*1.5,0),H.setMatrixAt(St,q),St++}H.instanceMatrix.needsUpdate=!0;let lt=0,ct=0,Ct=0,xt=0;const Ht=.05,vt=.15,yt=o=>{Ct=o.clientX/window.innerWidth*2-1,xt=o.clientY/window.innerHeight*2-1};window.addEventListener("mousemove",yt,{passive:!0});const ht=()=>{const o=window.innerWidth,l=window.innerHeight;Y.aspect=o/l,Y.updateProjectionMatrix(),S.setSize(o,l)};window.addEventListener("resize",ht),ht();let y="grid",T=0,gt=0;const G=[];let Rt=0;const Kt=2500,Qt=3;let Et=0;const $t=8e-4;let dt=0;const te=5e-4;let k=0,It=0;const ee=1500,oe=1200,ne=800,ie=1200,re=.4,se=5,ae=1.6,le=.35,ce=3,he=new et(nt).multiplyScalar(le),At=new et;let Dt=0;const ge=800;let ut=null,pt=null;const de=2;function Tt(o){ut=requestAnimationFrame(Tt),pt===null&&(pt=o);const l=(o-pt)/1e3;if(lt+=(Ct-lt)*Ht,ct+=(xt-ct)*Ht,T+=(gt-T)*.04,y==="pipeline"){o-Rt>Kt&&G.length<Qt&&(Rt=o,G.push({x:(Math.random()-.5)*j*.8,y:(Math.random()-.5)*D*.8,radius:0,maxRadius:Math.max(j,D)*.6,strength:1,speed:.03+Math.random()*.02}));for(let e=G.length-1;e>=0;e--){const t=G[e];t.radius+=t.speed,t.strength=1-t.radius/t.maxRadius,t.radius>t.maxRadius&&G.splice(e,1)}}if(y==="globe"&&(Et+=$t),y==="prism"&&(dt+=te),y==="warp"){k=Math.min(k+5e-4,.15);const e=.008+k*.06;for(const t of wt){t.z+=e*t.speedMultiplier;const s=(t.z+_*.5)/_;t.stretch=1+s*k*2,t.brightness=.4+s*.6,t.z>Jt&&Xe(t,Vt,_)}}else k=Math.max(0,k-.01);if(T<.5){const e=A.filter(t=>t.isHighlighted).length;if(o-It>ee&&A.length>0&&e<ce){It=o;const t=A.filter(s=>!s.isHighlighted);if(t.length>0){const s=Math.floor(Math.random()*t.length),i=t[s];i.isHighlighted=!0,i.highlightStartTime=o,i.highlightDuration=(oe+ne+ie)*(1+(Math.random()-.5)*2*re)}}for(const t of A){if(!t.isHighlighted)continue;const s=o-t.highlightStartTime,i=t.highlightDuration,X=i*.35,n=i*.25,p=i*.15;if(s>i+p+300){t.isHighlighted=!1;for(const f of t.sphereIndices)Z[f].targetHighlight=0;continue}for(const f of t.sphereIndices){const a=Z[f],m=a.highlightDelay*p,x=s-m;x<0?a.targetHighlight=0:x<X+n?a.targetHighlight=1:a.targetHighlight=0}}}else for(const e of A){e.isHighlighted=!1;for(const t of e.sphereIndices)Z[t].targetHighlight=0}if(T>.5){const e=J.filter(t=>t.isHighlighted).length;if(o-Dt>ge&&e<1){Dt=o;const t=J.map((s,i)=>({state:s,idx:i})).filter(s=>!s.state.isHighlighted);if(t.length>0){const s=Math.floor(Math.random()*t.length),i=t[s];i.state.isHighlighted=!0,i.state.highlightStartTime=o,i.state.highlightDuration=4e3+Math.random()*2e3}}for(const t of J)t.isHighlighted&&o-t.highlightStartTime>t.highlightDuration&&(t.isHighlighted=!1)}let C=!1;const b=1.2,R=8,z=.6;Z.forEach((e,t)=>{const s=Math.max(0,l-e.delay),i=Math.min(1,s/de),X=Ge(i),n=Nt[t],p=n&&n.isInCube?J[n.cubeIdx]:null;let f=0;if(p&&p.isHighlighted){const r=o-p.highlightStartTime,d=p.highlightDuration/2;r<d?f=ot(r/d):f=ot(1-(r-d)/d)}const a=e.targetX,m=e.targetY,x=e.baseZ,v=e.baseScale;let g=a,w=m,M=0,E=v;if(y==="cube")n&&n.isInCube&&(g=n.cubeCenterX+(n.localX-(rt-1)/2)*st,w=n.cubeCenterY+(n.localY-(rt-1)/2)*st,M=(n.localZ-(rt-1)/2)*st+f*R),E=b*(1+f*z);else if(y==="pipeline"){g=a,w=m,M=0,E=1;let r=0;for(const d of G){const P=a-d.x,Gt=m-d.y,we=Math.sqrt(P*P+Gt*Gt),kt=2.5,zt=Math.abs(we-d.radius);if(zt<kt){const Se=(1-zt/kt)*d.strength;r=Math.max(r,Se)}}M=r*4,E=1+r*.5}else if(y==="globe"){const r=Ut[t];if(r&&r.isOnGlobe){const d=r.theta+Et;g=at*Math.sin(r.phi)*Math.cos(d),w=at*Math.cos(r.phi),M=at*Math.sin(r.phi)*Math.sin(d),E=1}else g=a,w=m,M=-50,E=.01}else if(y==="prism"){const r=jt[t];if(r&&r.isOnPrism){const d=Math.cos(dt),P=Math.sin(dt);g=r.x*d-r.z*P,w=r.y,M=r.x*P+r.z*d,E=1.2}else g=a,w=m,M=-50,E=.01}else if(y==="warp"){const r=wt[t];if(r&&r.isActive){const d=(r.z+_*.5)/_,P=.3+d*1.5;g=r.baseX*P,w=r.baseY*P,M=r.z,E=.6+d*1,H.setColorAt(t,W),C=!0}else g=0,w=0,M=-100,E=0}const I=ot(T),ue=a*(1-I)+g*I,Pt=m*(1-I)+w*I,pe=v*(1-I)+E*I,Yt=e.highlightAmount*(1-I),Zt=ot(Yt),fe=x*(1-I)+M*I+Zt*se,me=pe*(1+Zt*(ae-1));e.highlightAmount+=(e.targetHighlight-e.highlightAmount)*.12;const Xt=e.targetY-D*1.5,Me=Xt+(Pt-Xt)*X,be=T<.1?Me:Pt,tt=.08;e.currentX+=(ue-e.currentX)*tt,e.currentY+=(be-e.currentY)*tt,e.currentZ+=(fe-e.currentZ)*tt,e.currentScale+=(me-e.currentScale)*tt;const Wt=Math.max(Yt,f*I);Wt>.01?(At.copy(W).lerp(he,Wt),H.setColorAt(t,At),C=!0):e.highlightAmount<.01&&f<.01&&(H.setColorAt(t,W),C=!0),q.makeTranslation(e.currentX,e.currentY,e.currentZ),q.scale(new We(e.currentScale,e.currentScale,e.currentScale)),H.setMatrixAt(t,q)}),H.instanceMatrix.needsUpdate=!0,C&&H.instanceColor&&(H.instanceColor.needsUpdate=!0);const F=-ct*vt,L=-lt*vt,K=O*Math.sin(L)*Math.cos(F),Q=O*Math.sin(F),$=O*Math.cos(L)*Math.cos(F);Y.position.set(K,Q,$),Y.lookAt(0,0,0),S.render(it,Y)}return requestAnimationFrame(Tt),{canvas:S.domElement,setFormation:(o,l=!1)=>{y=o,gt=o==="grid"?0:1,l&&(T=gt)},getFormationProgress:()=>T,setPattern:o=>{for(let l=0;l<u;l++)for(let h=0;h<c;h++){const C=l*c+h,b=o[u-1-l]?.[h]??!1,R=Z[C];R&&(R.targetScale=b?1:.15,R.targetZ=b?2:0,R.isCharacter=b)}},setText:o=>{const l=Ze(),h=5,C=7,b=1,R=8,z=["ORG","PRESS"],F="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),L=Array(u).fill(null).map(()=>Array(c).fill(!1)),K=Array(u).fill(null).map(()=>Array(c).fill(-1));A.length=0;let Q=0;for(let s=0;s<u;s+=R){let i=0;for(;i<c;)if(Math.random()<.2){const n=z[Math.floor(Math.random()*z.length)],p=n.length*(h+b)-b;if(i+p>c)break;const f={word:n,sphereIndices:[],isHighlighted:!1,highlightStartTime:0,highlightDuration:0};let a=i;for(const m of n){const x=l[m.toUpperCase()];if(!x){a+=h+b;continue}for(let v=0;v<C;v++)for(let g=0;g<h;g++)if(x[v]?.[g]){const w=s+v,M=a+g;w>=0&&w<u&&M>=0&&M<c&&(L[w][M]=!0,K[w][M]=Q)}a+=h+b}A.push(f),Q++,i+=p+2}else{const n=2+Math.floor(Math.random()*4);for(let p=0;p<n&&!(i+h>c);p++){const f=F[Math.floor(Math.random()*F.length)],a=l[f];if(!a){i+=h+b;continue}for(let m=0;m<C;m++)for(let x=0;x<h;x++)if(a[m]?.[x]){const v=s+m,g=i+x;v>=0&&v<u&&g>=0&&g<c&&(L[v][g]=!0)}i+=h+b}}}const $=.8,e=0,t=.15;for(let s=0;s<u;s++)for(let i=0;i<c;i++){const X=s*c+i,n=Z[X];if(!n)continue;const p=u-1-s,f=L[p]?.[i]??!1,a=K[p]?.[i]??-1;f?(n.targetScale=$,n.baseScale=$,n.targetZ=e,n.baseZ=e,n.isCharacter=!0,n.wordGroup=a,n.highlightDelay=Math.random(),a>=0&&a<A.length&&A[a].sphereIndices.push(X)):(n.targetScale=t,n.baseScale=t,n.targetZ=0,n.baseZ=0,n.isCharacter=!1,n.wordGroup=-1)}},dispose:()=>{ut&&cancelAnimationFrame(ut),window.removeEventListener("mousemove",yt),window.removeEventListener("resize",ht),S.dispose(),ft.dispose(),mt.dispose()}}}var ke=Ft;const ze=Object.freeze(Object.defineProperty({__proto__:null,createSphereGridBackground:Ft,default:ke},Symbol.toStringTag,{value:"Module"})),Fe={"block-content-landing-three-sphere-grid-org-0":{module:ze,ext:"ts",isReact:!1,modeName:"dom"}};Ce(Fe);
